(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,518703,e=>{"use strict";var s=e.i(884803),a=e.i(402826),l=e.i(896804);function r(){let e=(0,l.useSearchParams)(),r=(0,l.useRouter)(),t=e?.get("plan"),d=e?.get("price");alert(`Order ID:${t}, price:${d}`);let[n,i]=(0,a.useState)(),[c,m]=(0,a.useState)(!1),[o,x]=(0,a.useState)(""),[h,u]=(0,a.useState)("upi"),[p,g]=(0,a.useState)({name:"",email:"",phone:""}),[j,N]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&(m(!0),fetch(`http://localhost:3001/api/orders/${t}`).then(e=>{if(!e.ok)throw Error("Order not found");return e.json()}).then(e=>{if(e.success)i({price:e.data.price});else throw Error("Plan not found");g(s=>({...s,email:e.email||"",name:e.name||""}))}).catch(e=>x(e.message)).finally(()=>m(!1)))},[t]);let f=e=>{g({...p,[e.target.name]:e.target.value})},v=async()=>{if(!n)return x("No order loaded");N(!0),x("");try{setTimeout(()=>{r.push("/dashboard")},1200)}catch(e){x(e.message)}finally{N(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:(0,s.jsxs)("div",{className:"w-full max-w-3xl bg-white shadow-lg rounded-2xl p-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Complete Payment"}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Order: ",t||"—"]})]}),c&&(0,s.jsx)("div",{className:"py-6 text-center",children:"Loading order…"}),o&&(0,s.jsx)("div",{className:"mb-4 text-red-600",children:o}),b&&(0,s.jsx)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded",children:(0,s.jsx)("strong",{children:"Payment successful!"})}),!c&&n&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Plan"}),(0,s.jsx)("div",{className:"text-lg font-medium",children:t})]}),(0,s.jsxs)("div",{className:"border p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Amount"}),(0,s.jsx)("div",{className:"mt-1 text-2xl font-bold",children:`INR ${n.price}`}),(0,s.jsx)("div",{className:"mt-3 text-xs text-gray-500",children:"Amount is set by server and can't be changed here."})]}),(0,s.jsxs)("div",{className:"border p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Choose payment method"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{checked:"upi"===h,onChange:()=>u("upi"),type:"radio",name:"method"}),(0,s.jsx)("span",{className:"font-medium",children:"UPI (recommended)"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{checked:"card"===h,onChange:()=>u("card"),type:"radio",name:"method"}),(0,s.jsx)("span",{className:"font-medium",children:"Card"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{checked:"netbanking"===h,onChange:()=>u("netbanking"),type:"radio",name:"method"}),(0,s.jsx)("span",{className:"font-medium",children:"Netbanking"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{checked:"wallet"===h,onChange:()=>u("wallet"),type:"radio",name:"method"}),(0,s.jsx)("span",{className:"font-medium",children:"Wallet"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{className:"flex-1 py-3 rounded-lg bg-indigo-600 text-white font-semibold disabled:opacity-50",onClick:v,disabled:j,children:j?"Processing…":`Pay INR ${n.price}`}),(0,s.jsx)("button",{className:"py-3 px-4 rounded-lg border",onClick:()=>r.back(),disabled:j,children:"Cancel"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Billing Details"}),(0,s.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,s.jsx)("input",{name:"name",value:p.name,onChange:f,placeholder:"Full name",className:"w-full border rounded px-3 py-2"}),(0,s.jsx)("input",{name:"email",value:p.email,onChange:f,placeholder:"Email",className:"w-full border rounded px-3 py-2"}),(0,s.jsx)("input",{name:"phone",value:p.phone,onChange:f,placeholder:"Phone",className:"w-full border rounded px-3 py-2"})]}),(0,s.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Billing fields are optional but helpful for receipts."})]}),(0,s.jsxs)("div",{className:"border p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Order Summary"}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{children:t}),(0,s.jsxs)("div",{children:["INR ",n.price]})]}),(0,s.jsxs)("div",{className:"mt-3 border-t pt-3 text-lg font-semibold flex justify-between",children:[(0,s.jsx)("div",{children:"Total"}),(0,s.jsxs)("div",{children:["INR ",n.price]})]})]})]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"By clicking Pay, you agree to our Terms & Privacy."})]})]}),!c&&!n&&!o&&(0,s.jsx)("div",{className:"py-6 text-center text-gray-500",children:"No order loaded. Provide an orderId query param."})]})})}function t(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading payment details..."})]})}),children:(0,s.jsx)(r,{})})}e.s(["default",()=>t])}]);